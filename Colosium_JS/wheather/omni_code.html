<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather App</title>
</head>
<body>
  <h1>Simple Weather App</h1>

  <input type="text" placeholder="Enter city" id="cityInput">
  <button id="searchBtn">Search</button>

  <div id="status"></div>

  <div id="result">
    <h2 id="cityName"></h2>
    <p id="temperature"></p>
    <p id="description"></p>
    <img id="icon" src="" alt="weather icon">
    <p id="humidity"></p>
    <p id="wind"></p>
    <p id="result_1"></p>
  </div>

  <script>
    const searchBtn = document.getElementById('searchBtn');
    const cityInput = document.getElementById('cityInput');
    const status = document.getElementById('status');
    const cityName = document.getElementById('cityName');
    const temperature = document.getElementById('temperature');
    const description = document.getElementById('description');
    const icon = document.getElementById('icon');
    const humidity = document.getElementById('humidity');
    const wind = document.getElementById('wind');


    const result = document.getElementById("result_1");
    const input = document.getElementById("cityInput");

     searchBtn.addEventListener("click", async () => 
     {
        const city = input.value.trim();
        const APIKey = "df2f45836d87daaca0cbebee1eef0865";

        if (!city) 
        {
          result.textContent = "Please enter a city name.";
          return;
        }

        result.textContent = "Loading...";

        try 
        {
          const response = await fetch(
            `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(city)}&appid=${APIKey}`
          );

          if (!response.ok)
          {
            throw new Error("City not found");
          }

          const data = await response.json();

          const utc = new Date().getTime() + new Date().getTimezoneOffset() * 60000;
          const localTime = new Date(utc + 1000 * data.timezone);

          result.textContent =
            `Current time in ${data.name}: ` +
            localTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        }
        catch (error) 
        {
          result.textContent = "City not found or error loading data.";
        }
      });





    searchBtn.addEventListener('click', () => {
      const city = cityInput.value.trim();
      if (city === "") {
        status.innerText = "Please enter a city name.";
        return;
      }

      status.innerText = "Loading...";

      const apiKey = "df2f45836d87daaca0cbebee1eef0865"; 
      const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${apiKey}`;

      fetch(url)
        .then(response => 
        {
          if (!response.ok) {
            throw new Error("City not found");
          }
          return response.json();
        })

        .then(data => 
        {
          status.innerText = "";
          cityName.innerText = `${data.name}, ${data.sys.country}`;
          temperature.innerText = `Temperature: ${data.main.temp} Â°C`;
          description.innerText = `Weather: ${data.weather[0].description}`;
          icon.src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
          icon.alt = data.weather[0].description;
          humidity.innerText = `Humidity: ${data.main.humidity}%`;
          wind.innerText = `Wind Speed: ${data.wind.speed} m/s`;
        })

        .catch(error => 
        {
          status.innerText = error.message;
          cityName.innerText = "";
          temperature.innerText = "";
          description.innerText = "";
          icon.src = "";
          humidity.innerText = "";
          wind.innerText = "";
        });
    });
  </script>
</body>
</html>
