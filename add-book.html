<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADDing books</title>
    <style>
       #overlay {
      display: none; /* Hidden at start */
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5); /* semi-transparent background */
    }

    /* The popup window itself */
    #popup {
      background: white;
      width: 600px;
      margin: 100px auto;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }

    button {
      margin-top: 10px;
    }
    </style>
</head>
<body>
     <h3>Adding</h3>
     <button onclick="openPopup()">Add Person</button>
     <div id="result"></div>
  <div id="overlay">
    <div id="popup">
      <h3>Enter Info</h3>
      <label for="photo">Enter the photo</label><br>
      <input type="file" id="photo" accept="image/*"><br>

      <label for="title">Enter the title</label>
      <input type="text" id="title"><br>


      <label for="code">Enter code of book</label>
      <input type="text" id="code"><br>


      <label for="autor">Enter author of book</label>
      <input type="text" id="autor"><br>
      

      <label for="year">Enter the year of publication</label>
      <input type="text" id="year"><br>


      <label for="price">Enter the price</label>
      <input type="text" id="price"><br>


      <label for="possibility">Enter if the book is on taking</label>
      <input type="text" id="possibility"><br>

      <label for="message">Enter the year of message</label>
      <input type="text" id="message"><br>

      <button onclick="addPerson()">Add</button>
      <button onclick="closePopup()">Cancel</button>
    </div>
  </div>

  <script>
 
   

    function addPerson() {
     

        let title1 = document.getElementById("title").value;
        let code1 = document.getElementById("code").value;
        let autor1 = document.getElementById("autor").value;
        let year1 = document.getElementById("year").value;
        let price1 = parseFloat(document.getElementById("price").value);
        let possibility1 = document.getElementById("possibility").value;
        let message1 = document.getElementById("message").value;
        let input = document.getElementById('photo').files[0];

      if (title1 && code1 && autor1 && year1 && price1  &&  possibility1 && input && message1 ) 
      {
        // get old list from localStorage
      
      

        let reader = new FileReader();
        reader.onload = function(e) {

          let people = JSON.parse(localStorage.getItem("peopleList")) || [];

          let newPerson = {
          title: title1,
          code: code1,
          author: autor1,
          year: year1,
          price: price1,
          status: possibility1,
          photo: e.target.result, // Base64 image data
          message: message1
          };
        
        // add new person
        people.push(newPerson);

        // save it back
        localStorage.setItem("peopleList", JSON.stringify(people));
        
        // show in current page
        let resultDiv = document.getElementById("result");
        resultDiv.innerHTML += `
        <strong>title:</strong> ${newPerson.title}<br>
        <strong>code:</strong> ${newPerson.code}<br>
        <strong>author:</strong> ${newPerson.author}<br>
        <strong>year:</strong> ${newPerson.year}<br>
        <strong>price:</strong> ${newPerson.price}<br>
        <strong>status:</strong> ${newPerson.status}<br>
        <strong>message:</strong> ${newPerson.message}<br>
        <strong>photo:</strong>  <img src="${newPerson.photo}" width="100"><br>
             `;

        // close popup
        closePopup();

        // clear inputs
          document.getElementById("title").value = "";
          document.getElementById("code").value = "";
          document.getElementById("autor").value = "";
          document.getElementById("year").value = "";
          document.getElementById("price").value = "" ;
          document.getElementById("possibility").value = "" ;
          document.getElementById("message").value = "" ;
          document.getElementById('photo').value = "" ;
          
      } 

      reader.readAsDataURL(input);


      }
      else
      {
        alert("Please enter both name and family name.");
      }
    }

  
  </script>

 

</body>
 </html>  
